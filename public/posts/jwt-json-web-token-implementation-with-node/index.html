<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.7070d9bf6c4a7cb022cd.css">@import url(https://fonts.googleapis.com/css?family=Hind+Madurai:300,400,500,600,700);@import url(https://fonts.googleapis.com/css?family=Merriweather:300,400,700,900&display=swap);@import url(https://use.fontawesome.com/releases/v5.6.3/css/all.css);
/*! normalize.css v3.0.2 | MIT License | git.io/normalize */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}html{scroll-behavior:smooth}body,html{height:100%}body{position:relative;font-family:Hind Madurai,sans-serif;color:#757575}.home{background:#f1f1ff}.show-content{background:#fff}*,:after,:before{box-sizing:border-box;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-font-feature-settings:auto;font-feature-settings:auto;-webkit-font-kerning:auto;font-kerning:auto}h1,h2,h3,h4,h5,h6{font-family:Hind Madurai,sans-serif}.wrapper{width:960px;max-width:100%;margin:0 auto}a{text-decoration:none;background-image:none;text-shadow:none;font-family:Hind Madurai,sans-serif;color:#112739;font-weight:700}ul{padding:0}.center{text-align:center}section{padding:2rem 0 5rem}img{width:100%}.sml-wrapper{max-width:600px}.content,.sml-wrapper{width:100%;margin:0 auto}.content{max-width:800px;font-family:Hind Madurai,sans-serif;font-size:18px;color:#5d5c5c}.content p{line-height:24px;font-weight:400}.content a{color:#027bad}.main{padding:1rem 0 2rem}pre{font-size:16px;border-radius:4px}@media screen and (max-width:420px){.content{font-size:18px;padding:0 2rem 2rem}}@media screen and (min-width:421px) and (max-width:768px){.content{padding:0 2rem 2rem;font-size:18px}}.header__topbar{position:fixed;top:0;width:100%;z-index:10;color:#23020a;background:repeating-linear-gradient(111deg,#23020a,#23020a 25%,#e84155 0,#e84155 50%,#048e92 0,#048e92 75%,#2f3f6f 0,#2f3f6f);display:block;height:15px}.header__topbar:hover{background-image:repeating-linear-gradient(120deg,#23020a,#23020a 25%,#e84155 0,#e84155 50%,#048e92 0,#048e92 75%,#2f3f6f 0,#2f3f6f)}.header__content-block{display:grid;grid-template-columns:110px auto;align-content:center}.header__logo-sec{display:inline-block;background:#23020a;position:relative;height:90px;width:90px}.header__logo{font-size:50px;font-weight:700;color:#fff;position:absolute;right:10%;display:grid;height:100%;align-content:end;justify-content:end;width:100%}.header__social-pack{display:inline-block;text-align:center;display:flex;font-size:16px;justify-content:center}.header__social-sec{margin:0 .3rem;display:flex;align-items:center}.header__social-sec span{display:inline-block;margin-right:.2rem}.header__social-sec a{border-bottom:3px solid transparent}.header__social-sec a:hover{border-bottom:3px solid #112739}.main__author-subhead{font-size:26px;color:#757575;font-weight:400}.main__author-head{color:#112739;font-weight:700;font-size:45px}.main__author-experct{max-width:600px;width:100%;margin:0 auto;font-size:18px}.main__content-link:hover{color:#028356}@media screen and (max-width:800px){.header__social-pack{flex-direction:column;align-content:end;margin-top:15px}.header__social-sec{justify-content:flex-end}.main__author-head{font-size:35px}.main__author-experct{padding:1rem;text-align:center}}.about{margin:2rem auto}.about__sec{display:grid;grid-template-columns:1fr 1fr}.about__head{font-size:2.15rem;font-weight:700;color:#112739}.about__author-img{border-radius:50%;width:150px;justify-self:end;align-self:center;margin:0}@media screen and (max-width:420px){.about__sec{padding:0 1rem}}.footer{background:#fff;position:fixed;width:100%;bottom:0}.footer__text{font-size:16px;font-weight:300;margin:0;padding:.5rem 0}.posts{margin:3rem 0;display:grid;grid-template-columns:1fr 1fr;grid-gap:3rem}.posts__single{border:1px solid #ddd;background:#fff;background-image:none;display:inline-block;padding:2rem;border-radius:5px}.large{display:block;margin:2rem 0;text-align:center}.posts__date-and-time{font-size:16px;font-weight:300;color:#757575}.posts__title{font-size:2rem;color:#112739;font-weight:bolder}.posts__excerpt{color:#757581;font-weight:400}@media screen and (max-width:420px){.posts{grid-template-columns:1fr}.posts__single{margin:0 1rem}.posts__title{font-size:25px}}@media screen and (min-width:421px) and (max-width:960px){.posts{grid-template-columns:1fr}.posts__wrapper{padding:0 4rem}}.post__info{font-family:Hind Madurai,sans-serif;font-size:16px;text-rendering:optimizelegibility;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;text-size-adjust:100%;display:flex;align-items:center}.post__title{font-weight:700;font-size:2.5rem;color:#112739}@media screen and (max-width:420px){.post__title{font-size:30px}.post__info{display:block;text-align:center}}.pagination{display:flex;padding:2rem 0;justify-content:center}.pagination__link{display:inline-block;border-radius:4px;margin:0 1rem;border:1px solid #ddd;padding:8px 14px}@media screen and (max-width:420px){.pagination{padding-bottom:4rem}}.social-share__icon{display:inline-block;padding:15px;background:#1da1f2;border-radius:50%;cursor:pointer}.social-share__icon i{color:#fff;font-size:20px}.social-share__container{display:grid;place-content:center}@media screen and (min-width:960px){.social-share__icon{position:fixed;top:calc(50% - 25px);left:1%}}@media screen and (max-width:959px){.social-share__wrapper{margin-left:auto}.share_button-wrapper{margin:1rem 0;display:flex;align-items:center}.share_button-wrapper .share_button-text{margin:0 1rem}}.not-found{background-image:url(https://gifimage.net/wp-content/uploads/2017/09/404-gif-3.gif);background-repeat:no-repeat;background-size:cover;background-position:50%;height:70vh}@media screen and (max-width:420px){.not-found{background-image:url(https://i.pinimg.com/originals/bd/df/d6/bddfd6e4434f42662b009295c9bab86e.gif)}}code[class*=language-],pre[class*=language-]{color:#ccc;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}</style><meta name="generator" content="Gatsby 2.9.2"/><title data-react-helmet="true">JWT(JSON Web Token)¬†: Implementation with Node</title><meta data-react-helmet="true" name="title" content="JWT(JSON Web Token)¬†: Implementation with Node"/><meta data-react-helmet="true" name="description" content="JSON Web Token is an open, industry-standard RCF 7519 method for authorizing transaction or requests between two parties. Basically, JWT‚Ä¶"/><meta data-react-helmet="true" property="og:title" content="JWT(JSON Web Token)¬†: Implementation with Node"/><meta data-react-helmet="true" property="og:url" content="https://praveen-me.github.io/posts/jwt-json-web-token-implementation-with-node/"/><meta data-react-helmet="true" property="og:image"/><meta data-react-helmet="true" property="og:image:secure_url"/><meta data-react-helmet="true" property="og:description" content="JSON Web Token is an open, industry-standard RCF 7519 method for authorizing transaction or requests between two parties. Basically, JWT‚Ä¶"/><meta data-react-helmet="true" property="og:image:width" content="1200"/><meta data-react-helmet="true" property="og:image:height" content="630"/><meta data-react-helmet="true" property="og:locale" content="en"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:title" content="JWT(JSON Web Token)¬†: Implementation with Node"/><meta data-react-helmet="true" name="twitter:description" content="JSON Web Token is an open, industry-standard RCF 7519 method for authorizing transaction or requests between two parties. Basically, JWT‚Ä¶"/><meta data-react-helmet="true" name="twitter:image"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="robots" content="index, follow"/><meta data-react-helmet="true" name="twitter:creator" content="@am_pra_veen"/><meta data-react-helmet="true" property="og:site_name" content="https://praveen-me.github.io"/><link rel="shortcut icon" href="/icons/icon-48x48.png?v=c3ef5c3623355b33ff5e968102b259f1"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=c3ef5c3623355b33ff5e968102b259f1"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=c3ef5c3623355b33ff5e968102b259f1"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=c3ef5c3623355b33ff5e968102b259f1"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=c3ef5c3623355b33ff5e968102b259f1"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=c3ef5c3623355b33ff5e968102b259f1"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=c3ef5c3623355b33ff5e968102b259f1"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=c3ef5c3623355b33ff5e968102b259f1"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=c3ef5c3623355b33ff5e968102b259f1"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-2743bd039097f65a4ce1.js"/><link as="script" rel="preload" href="/10-05a7c7a04522f28907c7.js"/><link as="script" rel="preload" href="/0-1a19e97fde56f758054a.js"/><link as="script" rel="preload" href="/app-f7db67cce0ac31d1d613.js"/><link as="script" rel="preload" href="/styles-eb34812387e7ff68741d.js"/><link as="script" rel="preload" href="/webpack-runtime-0b452f5fbee401d48060.js"/><link as="fetch" rel="preload" href="/page-data/posts/jwt-json-web-token-implementation-with-node/page-data.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div class="show-content"><header class="header" id="top"><a href="#top" class="header__topbar">&quot;</a><div class="header__content-block"><div class="header__logo-sec"><a class="header__logo" href="/">JS</a></div><div class="header__social-pack"><div class="header__social-sec"><span> <!-- -->twitter<!-- --> </span><a href="https://twitter.com/am_pra_veen" rel="noopener noreferrer" target="_blank"> @<!-- -->am_pra_veen</a></div><div class="header__social-sec"><span> <!-- -->github<!-- --> </span><a href="https://github.com/praveen-me" rel="noopener noreferrer" target="_blank"> @<!-- -->praveen-me</a></div><div class="header__social-sec"><span> <!-- -->linkedin<!-- --> </span><a href="https://linkedin.com/in/praveen-me" rel="noopener noreferrer" target="_blank"> @<!-- -->praveen-me</a></div></div></div></header><main class="wrapper main"><div class="content post"><h2 class="post__title center"> <!-- -->JWT(JSON Web Token)¬†: Implementation with Node</h2><p class="post__info"><span class="post__date">Tue Jan 15 2019</span>  ‚Äî<span class="post__time">2<!-- --> <!-- -->minutes<!-- --> read</span></p><div><p>JSON Web Token is an open, industry-standard RCF 7519 method for authorizing transaction or requests between two parties. Basically, JWT used for the authorization purpose. We can authorize through session, cookies and third-party authorization.</p>
<p><img src="https://cdn-images-1.medium.com/max/2000/1*IqAodJn46th31XLkU5Qf1w.jpeg" alt="Source ‚Äî [http://robmclarty.com/blog/what-is-a-json-web-token](http://robmclarty.com/blog/what-is-a-json-web-token)"><em>Source ‚Äî <a href="http://robmclarty.com/blog/what-is-a-json-web-token">http://robmclarty.com/blog/what-is-a-json-web-token</a></em></p>
<h3>Steps What happened basically:</h3>
<ul>
<li>
<p>The user sends the login credentials. If succeed, the server sends back a JWT token.</p>
</li>
<li>
<p>The sent JWT token to have to be stored in local storage.</p>
</li>
<li>
<p>Now, the client takes JWT and makes a request by putting JWT in Authorization header for data for the user.</p>
</li>
<li>
<p>The server verifies the JWT. If successful then sends the data back to the client.</p>
</li>
<li>
<p>After every request from the client side made by putting JWT in the authorization header.</p>
</li>
<li>
<p>On logout, just destroy the JWT locally.</p>
</li>
</ul>
<h2>Creation of JWT</h2>
<p>There‚Äôre a lot of packages but we are going to use <a href="https://www.npmjs.com/package/jsonwebtoken">jsonwebtoken</a> for creating JWT and for checking purpose we can use passport‚Äôs JWT strategy package.
So, we have to install <a href="https://www.npmjs.com/package/passport">passport</a>, <a href="https://www.npmjs.com/package/passport-jwt">passport-jwt</a> and <a href="https://www.npmjs.com/package/passport-local">passport-local</a>.
Now, It‚Äôs time to create JWT. Let‚Äôs assume that we have some user login credentials.
Let‚Äôs make a passport module for passport functions:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">    <span class="token keyword">const</span> jwt <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'jsonwebtoken'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> passport <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'passport'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> LocalStrategy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'passport-local'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Stratergy<span class="token punctuation">;</span>

    <span class="token comment">// Use Local Startergy for authenticating user </span>
    passport<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LocalStrategy</span><span class="token punctuation">(</span>
      <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">username<span class="token punctuation">,</span> password<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        User<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span> username<span class="token punctuation">:</span> username <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">.</span><span class="token function">verifyPassword</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Apply passport authentication for getting user payload app.post('/login', (req, res, next) => {</span>
      passport<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token string">'local'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> userData</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>userData <span class="token operator">||</span> err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              msg<span class="token punctuation">:</span> <span class="token string">'Account not available. Please Sign Up.'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          req<span class="token punctuation">.</span><span class="token function">logIn</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              token<span class="token punctuation">:</span> jwt<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token punctuation">{</span>user<span class="token punctuation">:</span> userData<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'secret'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>When we get the token on the client side. Then it should be an encrypted string like this.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token operator">**</span>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9<span class="token operator">**</span><span class="token punctuation">.</span>
eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ<span class="token punctuation">.</span>
<span class="token operator">*</span>SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c<span class="token operator">*</span></code></pre></div>
<p>This string contains three parts as you see above. Let‚Äôs break them down:</p>
<ul>
<li><strong>**</strong> Part ‚Äî Contains constructing algorithm and type of token</li>
<li>Normal Part ‚Äî Payload data it is created</li>
<li><strong>*</strong> Part ‚Äî Signature (base64UrlEncode(header) + ‚Äò.‚Äô+
base64UrlEncode(payload))</li>
</ul>
<h2>Applying JWT for Authorization</h2>
<p>Now, we have the JWT at our client and now we have to save that in our local-storage for getting the data throughout the application.
Now after that, if we want to get the data of the user then we have to make a <strong>GET</strong> request by passing that JWT in <strong>authorization</strong> header:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">    <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      method<span class="token punctuation">:</span> <span class="token constant">GET</span><span class="token punctuation">,</span>
      headers<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">'Authorization'</span> <span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'jwt'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">,</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Now, we are going to use the passport-jwt for verifying the token that is coming from the client-side.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">    <span class="token keyword">const</span> JwtStrategy <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'passport-jwt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Strategy<span class="token punctuation">;</span>
    <span class="token keyword">const</span> ExtractJwt <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'passport-jwt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>ExtractJwt<span class="token punctuation">;</span>

    <span class="token comment">// Using passport-jwt stratergy</span>
    passport<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JwtStrategy</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      jwtFromRequest <span class="token punctuation">:</span> ExtractJwt<span class="token punctuation">.</span><span class="token function">fromAuthHeaderAsBearerToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      secretOrKey <span class="token punctuation">:</span><span class="token string">'secret'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">jwt_payload<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        User<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span>_id<span class="token punctuation">:</span> jwt_payload<span class="token punctuation">.</span>_id<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>err <span class="token operator">||</span> <span class="token operator">!</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token keyword">return</span> <span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Now, we implemented our passport middleware and we have to just call the passport authentication method on whatever endpoint we want to authenticate.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">    app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> passport<span class="token punctuation">.</span><span class="token function">authenticate</span><span class="token punctuation">(</span><span class="token string">'jwt'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> session<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        user<span class="token punctuation">:</span> req<span class="token punctuation">.</span>user
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Finally, we implemented JWT using Node.
Check the code gist from <a href="https://gist.github.com/praveen-me/a10e0032b4b2331cc7df4302931b8f41">here</a>.
Connect me through <a href="https://github.com/praveen-me">Github</a> and <a href="https://twitter.com/am_pra_veen">Twitter</a>.</p></div><div class="share_button-wrapper"><div aria-label="twitter" role="button" tabindex="0" class="SocialMediaShareButton SocialMediaShareButton--twitter social-share__icon"><span class="social-share__container"><i class="fab fa-twitter"></i></span></div><p class="share_button-text">Share It On Twitter</p></div></div></main><footer class="footer"><p class="footer__text center">Made with <span aria-label="Heart Image" role="img" alt="image of heart">‚ù§Ô∏è</span> JavaScript and SASS with React and Gatsby <span aria-label="Computer Image" role="img" alt="image of computer">üíª</span></p></footer></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-120510216-1', 'auto', {});
      
      
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/jwt-json-web-token-implementation-with-node/";window.webpackCompilationHash="2cfa77fcbfd2ded055ba";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-f7db67cce0ac31d1d613.js"],"component---src-templates-blog-list-js":["/component---src-templates-blog-list-js-7676409409ff218654e5.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-2743bd039097f65a4ce1.js"],"component---src-pages-404-js":["/component---src-pages-404-js-b53ed25f32299e26080a.js"],"component---src-pages-about-js":["/component---src-pages-about-js-8b7b7bd795fb7fb85503.js"],"component---src-pages-index-js":["/component---src-pages-index-js-5b368c7a8e70b97e524a.js"],"component---src-pages-page-2-js":["/component---src-pages-page-2-js-3bac4e12b945a3433732.js"]};/*]]>*/</script><script src="/webpack-runtime-0b452f5fbee401d48060.js" async=""></script><script src="/styles-eb34812387e7ff68741d.js" async=""></script><script src="/app-f7db67cce0ac31d1d613.js" async=""></script><script src="/0-1a19e97fde56f758054a.js" async=""></script><script src="/10-05a7c7a04522f28907c7.js" async=""></script><script src="/component---src-templates-blog-post-js-2743bd039097f65a4ce1.js" async=""></script></body></html>